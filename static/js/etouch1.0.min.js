(function(a,h){function e(j,i,l,k){return Math.abs(j-i)>=Math.abs(l-k)?(j-i>0?"left":"right"):(l-k>0?"up":"down")}function f(n,m,j,l){if(typeof j!="string"){for(var k=0;k<n.length;k++){n[k].addEventListener(m,l,false)}return}n[0].addEventListener(m,function(q){var r=q.target;var i=q.currentTarget;var p=true;while(p&&r!=i){if(o(n,j,r)){p=l.call(r,q)}r=r.parentNode}return p},false);function o(s,p,t){var q=s[0].querySelectorAll(p);for(var r=0;r<q.length;r++){if(q[r]==t){return true}}}}function c(j,i,k){this.root=document.querySelectorAll(j);if(!this.root){console.log("root不存在");return}this.target={el:null,w:null,h:null};this.touchObj={status:"",pageX:0,pageY:0,clientX:0,clientY:0,distanceX:0,distanceY:0};this.isTap=false;this.time=0;this.selector=i;this.Event=[];this.count=0;this.p=0;this.clock=null;if(arguments[2]==h){this.operate(arguments[1]);if(String(arguments[1]).indexOf("e.clock")>1){this.clock=false}}else{this.operate(arguments[2]);if(String(arguments[2]).indexOf("e.clock")>1){this.clock=false}}}c.prototype.init=function(){this.touchObj.distanceX=0;this.touchObj.distanceY=0};c.prototype.operate=function(i){var j=this.touchObj,k=this.isTap,l=this;f(this.root,"touchstart",this.selector,function(m){l.target.el=this;l.target.w=this.getBoundingClientRect().width;l.target.h=this.getBoundingClientRect().height;d(m,j,l)});f(this.root,"touchmove",this.selector,function(m){g(m,l.target,j,l)});f(this.root,"touchend",this.selector,function(m){b(m,this,j,l,i)});return this};c.prototype.trigger=function(k,l){for(var j=0;j<this.Event.length;j++){if(this.Event[j].type==k){this.Event[j].method.call(this.target.el,l,this.touchObj)}}return this};c.prototype.on=function(j,i){this.Event.push({type:j,method:i});return this};function d(k,j,i){i.init();var l=k.touches[0];j.pageX=l.pageX;j.pageY=l.pageY;j.clientX=l.clientX;j.clientY=l.clientY;i.time=+new Date()}function g(o,i,p,m){var j=o.touches[0];p.status="swiper";p.distanceX=j.pageX-p.pageX;p.distanceY=j.pageY-p.pageY;m.count++;m.p=m.p+0.5*p.distanceY*p.distanceY/p.distanceX;var l=m.p/m.count;var n=(2/3)*(2*l*p.distanceX)*Math.sqrt(2*l*p.distanceX);var k=i.h;var r=i.w;var q=0;if((k/r)>0.1405){q=(2/3)*(Math.abs(p.distanceX)*r*0.0197)*Math.sqrt(Math.abs(p.distanceX)*r*0.0197)}else{q=(2/3)*(k*k*Math.abs(p.distanceX)/r)*Math.sqrt(k*k*Math.abs(p.distanceX)/r)}if(m.clock==false){o.preventDefault();m.trigger(p.status,o,p)}if(n<q){o.preventDefault();m.trigger(p.status,o,p)}}function b(o,k,r,n,q){var m=o.changedTouches[0];var l=+new Date()-n.time;r.distanceX=m.pageX-r.pageX;r.distanceY=m.pageY-r.pageY;var j=r.pageX;var i=r.pageX+r.distanceX;var s=r.pageY;var p=r.pageY+r.distanceY;r.status=e(j,i,s,p);if(l<150&&Math.abs(r.distanceX)<2&&Math.abs(r.distanceY)<2){n.isTap=true;if(n.isTap){r.status="tap";setTimeout(function(){n.isTap=false;q.call(k,o,r)},30)}}else{n.trigger(r.status,o,r)}n.count=0;n.p=0}if(typeof define==="function"&&(define.amd||define.cmd)){define(function(){return c(root,selector,fn)})}else{a.etouch=function(j,i,k){return new c(j,i,k)}}})(window,undefined);